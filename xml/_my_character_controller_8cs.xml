<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.12.0" xml:lang="ja">
  <compounddef id="_my_character_controller_8cs" kind="file" language="C#">
    <compoundname>MyCharacterController.cs</compoundname>
    <innerclass refid="struct_player_character_inputs" prot="public">PlayerCharacterInputs</innerclass>
    <innerclass refid="class_my_character_controller" prot="public">MyCharacterController</innerclass>
    <innernamespace refid="namespace_kinematic_character_controller">KinematicCharacterController</innernamespace>
    <innernamespace refid="namespace_unity_engine_1_1_text_core_1_1_text">UnityEngine::TextCore::Text</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="keyword">using<sp/></highlight><highlight class="normal">System.Collections;</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">System.Collections.Generic;</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">UnityEngine;</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">KinematicCharacterController;</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">System;</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">UnityEngine.TextCore.Text;</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">UniRx;</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">UniRx.Triggers;</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">TMPro;</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="12" refid="struct_player_character_inputs" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="struct_player_character_inputs" kindref="compound">PlayerCharacterInputs</ref></highlight></codeline>
<codeline lineno="13"><highlight class="normal">{</highlight></codeline>
<codeline lineno="14" refid="struct_player_character_inputs_1a350c59d7154ba522594b694281735ce7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="struct_player_character_inputs_1a350c59d7154ba522594b694281735ce7" kindref="member">MoveAxisForward</ref>;</highlight></codeline>
<codeline lineno="15" refid="struct_player_character_inputs_1a23592ad0a1cd99bd83ec88caa7b041e0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="struct_player_character_inputs_1a23592ad0a1cd99bd83ec88caa7b041e0" kindref="member">MoveAxisRight</ref>;</highlight></codeline>
<codeline lineno="16" refid="struct_player_character_inputs_1a4f6a4c0fea458ab803a200f3735cd11e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Quaternion<sp/><ref refid="struct_player_character_inputs_1a4f6a4c0fea458ab803a200f3735cd11e" kindref="member">CameraRotation</ref>;</highlight></codeline>
<codeline lineno="17"><highlight class="normal">}</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19" refid="class_my_character_controller" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="class_my_character_controller" kindref="compound">MyCharacterController</ref><sp/>:<sp/>MonoBehaviour,<sp/>ICharacterController</highlight></codeline>
<codeline lineno="20"><highlight class="normal">{</highlight></codeline>
<codeline lineno="21" refid="class_my_character_controller_1ad7fc8a6656d76efa97bdbbb4125a0800" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>KinematicCharacterMotor<sp/><ref refid="class_my_character_controller_1ad7fc8a6656d76efa97bdbbb4125a0800" kindref="member">Motor</ref>;</highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>当たり判定を行わないタグ</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/>[SerializeField]</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/>[Tag]</highlight></codeline>
<codeline lineno="26" refid="class_my_character_controller_1a2022e013bb49646422f1942a3a0d6d38" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>List&lt;string&gt;<sp/><ref refid="class_my_character_controller_1a2022e013bb49646422f1942a3a0d6d38" kindref="member">m_tagList</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">();</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/>[Header(</highlight><highlight class="stringliteral">&quot;Move&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="29" refid="class_my_character_controller_1ac7e8aec87788f26b79755e23ff4184bb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1ac7e8aec87788f26b79755e23ff4184bb" kindref="member">MaxStableMoveSpeed</ref><sp/>=<sp/>10f;</highlight></codeline>
<codeline lineno="30" refid="class_my_character_controller_1af959b5778bd6582b2b4721330c23dbba" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1af959b5778bd6582b2b4721330c23dbba" kindref="member">StableMovementSharpness</ref><sp/>=<sp/>15;</highlight></codeline>
<codeline lineno="31" refid="class_my_character_controller_1a43556f5bc1f5591faff8f5e0b192afae" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a43556f5bc1f5591faff8f5e0b192afae" kindref="member">OrientationSharpness</ref><sp/>=<sp/>10;</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/>[Header(</highlight><highlight class="stringliteral">&quot;Misc&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="34" refid="class_my_character_controller_1aa70e23f8bd4c1ac256617621a66aec33" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1aa70e23f8bd4c1ac256617621a66aec33" kindref="member">RotationObstruction</ref>;</highlight></codeline>
<codeline lineno="35" refid="class_my_character_controller_1ae507c57c6d18ec3275a8e84767fff8e0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Vector3<sp/><ref refid="class_my_character_controller_1ae507c57c6d18ec3275a8e84767fff8e0" kindref="member">Gravity</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Vector3(0,<sp/>-30f,<sp/>0);</highlight></codeline>
<codeline lineno="36" refid="class_my_character_controller_1a826e55ea74c6a6adf4dd70b8a9193783" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Transform<sp/><ref refid="class_my_character_controller_1a826e55ea74c6a6adf4dd70b8a9193783" kindref="member">MeshRoot</ref>;</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/>[Header(</highlight><highlight class="stringliteral">&quot;Animation<sp/>Parameters&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="39" refid="class_my_character_controller_1a11f6ec9a897577f451fcfe38cb98f1a1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Animator<sp/><ref refid="class_my_character_controller_1a11f6ec9a897577f451fcfe38cb98f1a1" kindref="member">CharacterAnimator</ref>;</highlight></codeline>
<codeline lineno="40" refid="class_my_character_controller_1a99d58a5f067e8241f15c21fba85e5737" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a99d58a5f067e8241f15c21fba85e5737" kindref="member">ForwardAxisSharpness</ref><sp/>=<sp/>10;</highlight></codeline>
<codeline lineno="41" refid="class_my_character_controller_1a918c2f607dc21348092cb538dba8020f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a918c2f607dc21348092cb538dba8020f" kindref="member">TurnAxisSharpness</ref><sp/>=<sp/>5;</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43" refid="class_my_character_controller_1a8a206beafc5f306c5b07437b09045ae9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a8a206beafc5f306c5b07437b09045ae9" kindref="member">m_isRootMotion</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="44" refid="class_my_character_controller_1a38f276d2a920d6b29b2f9c868e8327fc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a38f276d2a920d6b29b2f9c868e8327fc" kindref="member">IsRootMotion</ref><sp/>{<sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a8a206beafc5f306c5b07437b09045ae9" kindref="member">m_isRootMotion</ref>;<sp/>}<sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal"><sp/>{<sp/><ref refid="class_my_character_controller_1a8a206beafc5f306c5b07437b09045ae9" kindref="member">m_isRootMotion</ref><sp/>=<sp/>value;<sp/>}<sp/>}</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46" refid="class_my_character_controller_1af194deb3d473763cad5d338d2f071356" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1af194deb3d473763cad5d338d2f071356" kindref="member">m_moveSpeed</ref>;</highlight></codeline>
<codeline lineno="47" refid="class_my_character_controller_1a024ded67dc2d475cff4b07cc93534f17" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a024ded67dc2d475cff4b07cc93534f17" kindref="member">MoveSpeed</ref><sp/>{<sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal"><sp/>{<sp/><ref refid="class_my_character_controller_1af194deb3d473763cad5d338d2f071356" kindref="member">m_moveSpeed</ref><sp/>=<sp/>value;<sp/>}<sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1af194deb3d473763cad5d338d2f071356" kindref="member">m_moveSpeed</ref>;<sp/>}<sp/>}</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49" refid="class_my_character_controller_1af887b93be713e19b6839061b49d27a3b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Vector3<sp/><ref refid="class_my_character_controller_1af887b93be713e19b6839061b49d27a3b" kindref="member">m_moveVec</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Vector3(0,<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="50" refid="class_my_character_controller_1adaf5c86efb9606629a9cab2a2fe18337" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Vector3<sp/><ref refid="class_my_character_controller_1adaf5c86efb9606629a9cab2a2fe18337" kindref="member">MoveVec</ref><sp/>{<sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal"><sp/>{<sp/><ref refid="class_my_character_controller_1af887b93be713e19b6839061b49d27a3b" kindref="member">m_moveVec</ref><sp/>=<sp/>value;<sp/>}<sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1af887b93be713e19b6839061b49d27a3b" kindref="member">m_moveVec</ref>;<sp/>}<sp/>}</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
<codeline lineno="52" refid="class_my_character_controller_1a8bccb5295b0dfd28cb13b3c3d65496bd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Vector3<sp/><ref refid="class_my_character_controller_1a8bccb5295b0dfd28cb13b3c3d65496bd" kindref="member">m_lookVector</ref>;</highlight></codeline>
<codeline lineno="53" refid="class_my_character_controller_1a8464a261f4390f326ca62ee7a025060a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Vector3<sp/><ref refid="class_my_character_controller_1a8464a261f4390f326ca62ee7a025060a" kindref="member">LookVector</ref><sp/>{<sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal"><sp/>{<sp/><ref refid="class_my_character_controller_1a8bccb5295b0dfd28cb13b3c3d65496bd" kindref="member">m_lookVector</ref><sp/>=<sp/>value;<sp/>}<sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a8bccb5295b0dfd28cb13b3c3d65496bd" kindref="member">m_lookVector</ref>;<sp/>}<sp/>}</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//private<sp/>Vector3<sp/>_moveInputVector;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//private<sp/>Vector3<sp/>_lookInputVector;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58" refid="class_my_character_controller_1ad6ea957c48ffc7074efbabd7c8f4c334" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Vector3<sp/><ref refid="class_my_character_controller_1ad6ea957c48ffc7074efbabd7c8f4c334" kindref="member">_internalVelocityAdd</ref><sp/>=<sp/>Vector3.zero;</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60" refid="class_my_character_controller_1a5d7b91e771ee48035d847f20d7e6649a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a5d7b91e771ee48035d847f20d7e6649a" kindref="member">m_speedRate</ref>;</highlight></codeline>
<codeline lineno="61" refid="class_my_character_controller_1afce73e3ed04c9ae8a1b54df9f6d8549c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1afce73e3ed04c9ae8a1b54df9f6d8549c" kindref="member">SpeedRate</ref><sp/>{<sp/></highlight><highlight class="keyword">get</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a5d7b91e771ee48035d847f20d7e6649a" kindref="member">m_speedRate</ref>;<sp/>}<sp/></highlight><highlight class="keyword">set</highlight><highlight class="normal"><sp/>{<sp/><ref refid="class_my_character_controller_1a5d7b91e771ee48035d847f20d7e6649a" kindref="member">m_speedRate</ref><sp/>=<sp/>value;<sp/>}<sp/>}</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ルートモーション関連</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64" refid="class_my_character_controller_1aa133878026e968a9b7de0af66f417bc1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Vector3<sp/><ref refid="class_my_character_controller_1aa133878026e968a9b7de0af66f417bc1" kindref="member">_rootMotionPositionDelta</ref>;</highlight></codeline>
<codeline lineno="65" refid="class_my_character_controller_1ae96de5a8144a7450589f147f996e4d6f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Quaternion<sp/><ref refid="class_my_character_controller_1ae96de5a8144a7450589f147f996e4d6f" kindref="member">_rootMotionRotationDelta</ref>;</highlight></codeline>
<codeline lineno="66" refid="class_my_character_controller_1a512c37081df543d4afa3dcbf287f6b69" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a512c37081df543d4afa3dcbf287f6b69" kindref="member">_targetForwardAxis</ref>;</highlight></codeline>
<codeline lineno="67" refid="class_my_character_controller_1ae8e7afcb013bacffd018a5245eac766b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1ae8e7afcb013bacffd018a5245eac766b" kindref="member">_targetRightAxis</ref>;</highlight></codeline>
<codeline lineno="68" refid="class_my_character_controller_1a5bb3cf8827024afda6165a5a31eb6fce" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a5bb3cf8827024afda6165a5a31eb6fce" kindref="member">_forwardAxis</ref>;</highlight></codeline>
<codeline lineno="69" refid="class_my_character_controller_1a5045c562943be25d3a8c0e32d69d1c24" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a5045c562943be25d3a8c0e32d69d1c24" kindref="member">_rightAxis</ref>;</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72" refid="class_my_character_controller_1a990d3f6afaf070e68adaf393ee914d34" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a990d3f6afaf070e68adaf393ee914d34" kindref="member">Start</ref>()</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Assign<sp/>to<sp/>motor</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Motor.CharacterController<sp/>=<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1a11f6ec9a897577f451fcfe38cb98f1a1" kindref="member">CharacterAnimator</ref>.gameObject.OnAnimatorMoveAsObservable()</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.Where(_<sp/>=&gt;<sp/>enabled)</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.Subscribe(_<sp/>=&gt;</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_my_character_controller_1a8a206beafc5f306c5b07437b09045ae9" kindref="member">m_isRootMotion</ref>)</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1aa133878026e968a9b7de0af66f417bc1" kindref="member">_rootMotionPositionDelta</ref><sp/>+=<sp/><ref refid="class_my_character_controller_1a11f6ec9a897577f451fcfe38cb98f1a1" kindref="member">CharacterAnimator</ref>.deltaPosition;</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1ae96de5a8144a7450589f147f996e4d6f" kindref="member">_rootMotionRotationDelta</ref><sp/>=<sp/>CharacterAnimator.deltaRotation<sp/>*<sp/><ref refid="class_my_character_controller_1ae96de5a8144a7450589f147f996e4d6f" kindref="member">_rootMotionRotationDelta</ref>;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90" refid="class_my_character_controller_1a9400e3c314c4b046fcb10b9d96c22fbb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a9400e3c314c4b046fcb10b9d96c22fbb" kindref="member">Update</ref>()</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_my_character_controller_1a8a206beafc5f306c5b07437b09045ae9" kindref="member">m_isRootMotion</ref>)</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ルートモーション関連</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1a5bb3cf8827024afda6165a5a31eb6fce" kindref="member">_forwardAxis</ref><sp/>=<sp/>Mathf.Lerp(<ref refid="class_my_character_controller_1a5bb3cf8827024afda6165a5a31eb6fce" kindref="member">_forwardAxis</ref>,<sp/><ref refid="class_my_character_controller_1a512c37081df543d4afa3dcbf287f6b69" kindref="member">_targetForwardAxis</ref>,<sp/>1f<sp/>-<sp/>Mathf.Exp(-<ref refid="class_my_character_controller_1a99d58a5f067e8241f15c21fba85e5737" kindref="member">ForwardAxisSharpness</ref><sp/>*<sp/>Time.deltaTime));</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1a5045c562943be25d3a8c0e32d69d1c24" kindref="member">_rightAxis</ref><sp/>=<sp/>Mathf.Lerp(<ref refid="class_my_character_controller_1a5045c562943be25d3a8c0e32d69d1c24" kindref="member">_rightAxis</ref>,<sp/><ref refid="class_my_character_controller_1ae8e7afcb013bacffd018a5245eac766b" kindref="member">_targetRightAxis</ref>,<sp/>1f<sp/>-<sp/>Mathf.Exp(-<ref refid="class_my_character_controller_1a918c2f607dc21348092cb538dba8020f" kindref="member">TurnAxisSharpness</ref><sp/>*<sp/>Time.deltaTime));</highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_my_character_controller_1a2adde22a934ae7963f757f797386c7ad" kindref="member">FindParameter</ref>(</highlight><highlight class="stringliteral">&quot;Forward&quot;</highlight><highlight class="normal">))<sp/><ref refid="class_my_character_controller_1a11f6ec9a897577f451fcfe38cb98f1a1" kindref="member">CharacterAnimator</ref>.SetFloat(</highlight><highlight class="stringliteral">&quot;Forward&quot;</highlight><highlight class="normal">,<sp/><ref refid="class_my_character_controller_1a5bb3cf8827024afda6165a5a31eb6fce" kindref="member">_forwardAxis</ref>);</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_my_character_controller_1a2adde22a934ae7963f757f797386c7ad" kindref="member">FindParameter</ref>(</highlight><highlight class="stringliteral">&quot;Turn&quot;</highlight><highlight class="normal">))<sp/><ref refid="class_my_character_controller_1a11f6ec9a897577f451fcfe38cb98f1a1" kindref="member">CharacterAnimator</ref>.SetFloat(</highlight><highlight class="stringliteral">&quot;Turn&quot;</highlight><highlight class="normal">,<sp/><ref refid="class_my_character_controller_1a5045c562943be25d3a8c0e32d69d1c24" kindref="member">_rightAxis</ref>);</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_my_character_controller_1a2adde22a934ae7963f757f797386c7ad" kindref="member">FindParameter</ref>(</highlight><highlight class="stringliteral">&quot;OnGround&quot;</highlight><highlight class="normal">))<sp/><ref refid="class_my_character_controller_1a11f6ec9a897577f451fcfe38cb98f1a1" kindref="member">CharacterAnimator</ref>.SetBool(</highlight><highlight class="stringliteral">&quot;OnGround&quot;</highlight><highlight class="normal">,<sp/><ref refid="class_my_character_controller_1ad7fc8a6656d76efa97bdbbb4125a0800" kindref="member">Motor</ref>.GroundingStatus.IsStableOnGround);</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight></codeline>
<codeline lineno="104" refid="class_my_character_controller_1a2adde22a934ae7963f757f797386c7ad" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a2adde22a934ae7963f757f797386c7ad" kindref="member">FindParameter</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>name)</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal"><sp/>(AnimatorControllerParameter<sp/>parameter<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a11f6ec9a897577f451fcfe38cb98f1a1" kindref="member">CharacterAnimator</ref>.parameters)</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(parameter.name<sp/>==<sp/>name)</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="120" refid="class_my_character_controller_1adf64fd18f5e9cfd6ae373591202d0421" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1adf64fd18f5e9cfd6ae373591202d0421" kindref="member">BeforeCharacterUpdate</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>deltaTime)</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="123"><highlight class="normal"></highlight></codeline>
<codeline lineno="129" refid="class_my_character_controller_1addda837fc0521a70664ebfc1930846a9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1addda837fc0521a70664ebfc1930846a9" kindref="member">UpdateRotation</ref>(ref<sp/>Quaternion<sp/>currentRotation,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>deltaTime)</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_my_character_controller_1a8bccb5295b0dfd28cb13b3c3d65496bd" kindref="member">m_lookVector</ref><sp/>!=<sp/>Vector3.zero<sp/>&amp;&amp;<sp/><ref refid="class_my_character_controller_1a43556f5bc1f5591faff8f5e0b192afae" kindref="member">OrientationSharpness</ref><sp/>&gt;<sp/>0f)</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_lookVector.y<sp/>=<sp/>0f;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1a8bccb5295b0dfd28cb13b3c3d65496bd" kindref="member">m_lookVector</ref>.Normalize();</highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Smoothly<sp/>interpolate<sp/>from<sp/>current<sp/>to<sp/>target<sp/>look<sp/>direction</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector3<sp/>smoothedLookInputDirection<sp/>=<sp/>Vector3.Slerp(<ref refid="class_my_character_controller_1ad7fc8a6656d76efa97bdbbb4125a0800" kindref="member">Motor</ref>.CharacterForward,<sp/><ref refid="class_my_character_controller_1a8bccb5295b0dfd28cb13b3c3d65496bd" kindref="member">m_lookVector</ref>,<sp/>1<sp/>-<sp/>Mathf.Exp(-<ref refid="class_my_character_controller_1a43556f5bc1f5591faff8f5e0b192afae" kindref="member">OrientationSharpness</ref><sp/>*<sp/>deltaTime)).normalized;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>the<sp/>current<sp/>rotation<sp/>(which<sp/>will<sp/>be<sp/>used<sp/>by<sp/>the<sp/>KinematicCharacterMotor)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentRotation<sp/>=<sp/>Quaternion.LookRotation(smoothedLookInputDirection,<sp/><ref refid="class_my_character_controller_1ad7fc8a6656d76efa97bdbbb4125a0800" kindref="member">Motor</ref>.CharacterUp);</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ルートモーション</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentRotation<sp/>=<sp/>currentRotation*<sp/><ref refid="class_my_character_controller_1ae96de5a8144a7450589f147f996e4d6f" kindref="member">_rootMotionRotationDelta</ref>;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1a8bccb5295b0dfd28cb13b3c3d65496bd" kindref="member">m_lookVector</ref><sp/>=<sp/>Vector3.zero;</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="153" refid="class_my_character_controller_1a2c0b76fc7e389f679ba47283a5b71e11" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a2c0b76fc7e389f679ba47283a5b71e11" kindref="member">UpdateVelocity</ref>(ref<sp/>Vector3<sp/>currentVelocity,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>deltaTime)</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_my_character_controller_1ad7fc8a6656d76efa97bdbbb4125a0800" kindref="member">Motor</ref>.GroundingStatus.IsStableOnGround)</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reorient<sp/>source<sp/>velocity<sp/>on<sp/>current<sp/>ground<sp/>slope<sp/>(this<sp/>is<sp/>because<sp/>we<sp/>don&apos;t<sp/>want<sp/>our<sp/>smoothing<sp/>to<sp/>cause<sp/>any<sp/>velocity<sp/>losses<sp/>in<sp/>slope<sp/>changes)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//currentVelocity<sp/>=<sp/>Motor.GetDirectionTangentToSurface(currentVelocity,<sp/>Motor.GroundingStatus.GroundNormal)<sp/>*<sp/>currentVelocity.magnitude;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Calculate<sp/>target<sp/>velocity</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Vector3<sp/>inputRight<sp/>=<sp/>Vector3.Cross(_moveInputVector,<sp/>Motor.CharacterUp);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Vector3<sp/>reorientedInput<sp/>=<sp/>Vector3.Cross(Motor.GroundingStatus.GroundNormal,<sp/>inputRight).normalized<sp/>*<sp/>_moveInputVector.magnitude;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="class_my_character_controller_1a8a206beafc5f306c5b07437b09045ae9" kindref="member">m_isRootMotion</ref>)</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector3<sp/>targetMovementVelocity;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_my_character_controller_1af887b93be713e19b6839061b49d27a3b" kindref="member">m_moveVec</ref>.magnitude<sp/>==<sp/>0.0f)<sp/>targetMovementVelocity<sp/>=<sp/>Motor.CharacterForward<sp/>*<sp/><ref refid="class_my_character_controller_1af194deb3d473763cad5d338d2f071356" kindref="member">m_moveSpeed</ref><sp/>*<sp/><ref refid="class_my_character_controller_1a5d7b91e771ee48035d847f20d7e6649a" kindref="member">m_speedRate</ref>;</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>targetMovementVelocity<sp/>=<sp/><ref refid="class_my_character_controller_1af887b93be713e19b6839061b49d27a3b" kindref="member">m_moveVec</ref><sp/>*<sp/><ref refid="class_my_character_controller_1af194deb3d473763cad5d338d2f071356" kindref="member">m_moveSpeed</ref><sp/>*<sp/><ref refid="class_my_character_controller_1a5d7b91e771ee48035d847f20d7e6649a" kindref="member">m_speedRate</ref>;</highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Smooth<sp/>movement<sp/>Velocity</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentVelocity<sp/>=<sp/>Vector3.Lerp(currentVelocity,<sp/>targetMovementVelocity,<sp/>1<sp/>-<sp/>Mathf.Exp(-<ref refid="class_my_character_controller_1af959b5778bd6582b2b4721330c23dbba" kindref="member">StableMovementSharpness</ref><sp/>*<sp/>deltaTime));</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ルートモーションの移動</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(deltaTime<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>final<sp/>velocity<sp/>is<sp/>the<sp/>velocity<sp/>from<sp/>root<sp/>motion<sp/>reoriented<sp/>on<sp/>the<sp/>ground<sp/>plane</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector3<sp/>Velocity<sp/>=<sp/><ref refid="class_my_character_controller_1aa133878026e968a9b7de0af66f417bc1" kindref="member">_rootMotionPositionDelta</ref><sp/>/<sp/>deltaTime;</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentVelocity<sp/>=<sp/><ref refid="class_my_character_controller_1ad7fc8a6656d76efa97bdbbb4125a0800" kindref="member">Motor</ref>.GetDirectionTangentToSurface(Velocity,<sp/><ref refid="class_my_character_controller_1ad7fc8a6656d76efa97bdbbb4125a0800" kindref="member">Motor</ref>.GroundingStatus.GroundNormal)<sp/>*<sp/>Velocity.magnitude;</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//currentVelocity<sp/>*=<sp/>3.0f;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_my_character_controller_1a5bb3cf8827024afda6165a5a31eb6fce" kindref="member">_forwardAxis</ref><sp/>&gt;<sp/>0f)</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>we<sp/>want<sp/>to<sp/>move,<sp/>add<sp/>an<sp/>acceleration<sp/>to<sp/>the<sp/>velocity</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector3<sp/>targetMovementVelocity<sp/>=<sp/>Motor.CharacterForward<sp/>*<sp/><ref refid="class_my_character_controller_1a5bb3cf8827024afda6165a5a31eb6fce" kindref="member">_forwardAxis</ref><sp/>*<sp/><ref refid="class_my_character_controller_1af194deb3d473763cad5d338d2f071356" kindref="member">m_moveSpeed</ref><sp/>*<sp/><ref refid="class_my_character_controller_1a5d7b91e771ee48035d847f20d7e6649a" kindref="member">m_speedRate</ref>;</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector3<sp/>velocityDiff<sp/>=<sp/>Vector3.ProjectOnPlane(targetMovementVelocity<sp/>-<sp/>currentVelocity,<sp/><ref refid="class_my_character_controller_1ae507c57c6d18ec3275a8e84767fff8e0" kindref="member">Gravity</ref>);</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentVelocity<sp/>+=<sp/>velocityDiff<sp/>*<sp/>deltaTime;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Gravity</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentVelocity<sp/>+=<sp/><ref refid="class_my_character_controller_1ae507c57c6d18ec3275a8e84767fff8e0" kindref="member">Gravity</ref><sp/>*<sp/>deltaTime;</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_my_character_controller_1ad6ea957c48ffc7074efbabd7c8f4c334" kindref="member">_internalVelocityAdd</ref>.sqrMagnitude<sp/>&gt;<sp/>0f)</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentVelocity<sp/>+=<sp/><ref refid="class_my_character_controller_1ad6ea957c48ffc7074efbabd7c8f4c334" kindref="member">_internalVelocityAdd</ref>;</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1ad6ea957c48ffc7074efbabd7c8f4c334" kindref="member">_internalVelocityAdd</ref><sp/>=<sp/>Vector3.zero;</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1af887b93be713e19b6839061b49d27a3b" kindref="member">m_moveVec</ref><sp/>=<sp/>Vector3.zero;</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1a5d7b91e771ee48035d847f20d7e6649a" kindref="member">m_speedRate</ref><sp/>=<sp/>1.0f;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight></codeline>
<codeline lineno="210" refid="class_my_character_controller_1a58e2a58e81c457c505abf44f5672c45f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a58e2a58e81c457c505abf44f5672c45f" kindref="member">AfterCharacterUpdate</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>deltaTime)</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ルートモーション関連<sp/>Updateでためたルートモーションの移動量をリセット</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1aa133878026e968a9b7de0af66f417bc1" kindref="member">_rootMotionPositionDelta</ref><sp/>=<sp/>Vector3.zero;</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1ae96de5a8144a7450589f147f996e4d6f" kindref="member">_rootMotionRotationDelta</ref><sp/>=<sp/>Quaternion.identity;</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight></codeline>
<codeline lineno="217" refid="class_my_character_controller_1a8b2f30bc0c29635e62098467f8635dea" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a8b2f30bc0c29635e62098467f8635dea" kindref="member">IsColliderValidForCollisions</ref>(Collider<sp/>coll)</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal"><sp/>(var<sp/>tag<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a2022e013bb49646422f1942a3a0d6d38" kindref="member">m_tagList</ref>)</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(coll.CompareTag(tag))<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight></codeline>
<codeline lineno="228" refid="class_my_character_controller_1ac7e0195d2701b73d688e19b145613a66" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1ac7e0195d2701b73d688e19b145613a66" kindref="member">OnGroundHit</ref>(Collider<sp/>hitCollider,<sp/>Vector3<sp/>hitNormal,<sp/>Vector3<sp/>hitPoint,<sp/>ref<sp/>HitStabilityReport<sp/>hitStabilityReport)</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="232" refid="class_my_character_controller_1abdddf7f24dcc5c3266c89a7d30dd739f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1abdddf7f24dcc5c3266c89a7d30dd739f" kindref="member">OnMovementHit</ref>(Collider<sp/>hitCollider,<sp/>Vector3<sp/>hitNormal,<sp/>Vector3<sp/>hitPoint,<sp/>ref<sp/>HitStabilityReport<sp/>hitStabilityReport)</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight></codeline>
<codeline lineno="236" refid="class_my_character_controller_1ac948d9a3a5758da4ae75a8133f4978ec" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1ac948d9a3a5758da4ae75a8133f4978ec" kindref="member">PostGroundingUpdate</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>deltaTime)</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="239"><highlight class="normal"></highlight></codeline>
<codeline lineno="240" refid="class_my_character_controller_1aff53d43b677adcb6354dea7672f1d4c2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1aff53d43b677adcb6354dea7672f1d4c2" kindref="member">AddVelocity</ref>(Vector3<sp/>velocity)</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1ad6ea957c48ffc7074efbabd7c8f4c334" kindref="member">_internalVelocityAdd</ref><sp/>+=<sp/>velocity;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight></codeline>
<codeline lineno="245" refid="class_my_character_controller_1a3461b7977b581ed44263f2a01a97d032" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a3461b7977b581ed44263f2a01a97d032" kindref="member">ProcessHitStabilityReport</ref>(Collider<sp/>hitCollider,<sp/>Vector3<sp/>hitNormal,<sp/>Vector3<sp/>hitPoint,<sp/>Vector3<sp/>atCharacterPosition,<sp/>Quaternion<sp/>atCharacterRotation,<sp/>ref<sp/>HitStabilityReport<sp/>hitStabilityReport)</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="248"><highlight class="normal"></highlight></codeline>
<codeline lineno="249" refid="class_my_character_controller_1a426432b115fc711b9b708ae576e8e137" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a426432b115fc711b9b708ae576e8e137" kindref="member">OnDiscreteCollisionDetected</ref>(Collider<sp/>hitCollider)</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"></highlight></codeline>
<codeline lineno="254" refid="class_my_character_controller_1a828f224494547eb13b8e07b86fb0fdb3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a828f224494547eb13b8e07b86fb0fdb3" kindref="member">Jump</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>_jumpPower)</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1ad7fc8a6656d76efa97bdbbb4125a0800" kindref="member">Motor</ref>.ForceUnground(0.1f);</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1aff53d43b677adcb6354dea7672f1d4c2" kindref="member">AddVelocity</ref>(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Vector3(0f,<sp/>_jumpPower,<sp/>0f));</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight></codeline>
<codeline lineno="261" refid="class_my_character_controller_1ae75dc4895fde6a5bc8cc24c1a794aedb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1ae75dc4895fde6a5bc8cc24c1a794aedb" kindref="member">SetPositionMotor</ref>(Vector3<sp/>_pos,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>_bypassInterpolation<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_my_character_controller_1ad7fc8a6656d76efa97bdbbb4125a0800" kindref="member">Motor</ref><sp/>==<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Debug.LogError(</highlight><highlight class="stringliteral">&quot;モーターがシリアライズされていません&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1ad7fc8a6656d76efa97bdbbb4125a0800" kindref="member">Motor</ref>.SetPosition(_pos,<sp/>_bypassInterpolation);</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="271"><highlight class="normal"></highlight></codeline>
<codeline lineno="272" refid="class_my_character_controller_1a577b30a38b2db4ac071670f6cf84764d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_my_character_controller_1a577b30a38b2db4ac071670f6cf84764d" kindref="member">AddNoHitTag</ref>(</highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>_tagName)</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(_tagName.Length==0)</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_my_character_controller_1a2022e013bb49646422f1942a3a0d6d38" kindref="member">m_tagList</ref>.Add(_tagName);</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"></highlight></codeline>
<codeline lineno="283"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="004_Character/Scripts/MyCharacterController.cs"/>
  </compounddef>
</doxygen>
